---
title: "Exploratory Data Analysis"
author: "Arkaprabha Gun, Tushar Garg"
date: "`r Sys.Date()`"
---

```{r setup, include=F}
suppressMessages(if (!require("pacman")) install.packages("pacman"))
# pacman::p_load(tidyselect, here, ISOcodes, survey, expss, tidyverse,
#        haven, dplyr, ggplot2, labelled, rmarkdown, readxl, naniar,
#        ggiraph, xlsx, stringdist, foreign, here, janitor)
pacman::p_load(tidyverse, rio, janitor, here, gtsummary, survey, DataExplorer)
```

```{r}
### UNCOMMENT AND RUN FOLLOWING CODE FIRST TIME running the code
# NFHS5_PR <- import(here("Data_raw","IAPR7DFL.DTA"))
# export(NFHS5_PR,here("Data_clean","NFHS5_PR.RData"))

# Load data
load(here("Data_clean","NFHS5_PR.RData"))
NFHS5_PR <- x
```


```{r}

# Calculate Weight:
NFHS5_PR$wt <- NFHS5_PR$hv005 / 1000000

#plots histogram by waist circumference 

plot_histogram(data = NFHS5_PR$sh305) ## Significant portion of outliers > 900 cm waist circumference

NFHS5_PR %>% 
  ggplot(aes(sh305))+
  geom_boxplot()
```

```{r}
#Specifying Complex Survey Design (with 2-stage sampling)
NFHS5_design <- svydesign(id = NFHS5_PR$hv021, strata = NFHS5_PR$hv023, weights = NFHS5_PR$wt, data = NFHS5_PR, nest = TRUE)
options(survey.lonely.psu = "adjust")


```

```{r}
histogram_data <- svyhist(~ sh305, design = NFHS5_design)

```

